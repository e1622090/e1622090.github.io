/*
  出題用の問題リスト
  mode に応じて使用する配列を切り替える
*/
const problems = {
    R: ["R1", "R2", "R3","R4_1","R5","R6","R7","R8","R9","R10"],        // 来客対応
    P: ["P1", "P2","P3","P4_1","P5","P6","P7","P8","P9","P10"],        // 電話対応
    T: ["T1", "T2","T3","T4","T5","T6","T7","T8","T9","T10"],        // 先方訪問
    random: ["R1","R2","R3","R4_1","R5","R6","R7","R8","R9","R10","P1","P2","P3","P4_1","P5","P6","P7","P8","P9","P10","T1","T2","T3","T4","T5","T6","T7","T8","T9","T10"]
};


const problemFlow = {
    // 連続会話（強制遷移）
    R4_1: {
        next: "R4_2",
        buttonLabel: "連続会話"
    },
    // R4_2 は通常問題（何も書かない or null）
    P4_1: { next: "P4_2", buttonLabel: "連続会話" }
};



/*
  問題ごとの採点ルール定義
*/
const judgeRules = {


    // 来客対応 R1
    R1: {
        must: ["待合室", "ご案内", "そちら"],
        mustNot: ["待って"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ご案内": ["御案内", "御あんない","ごあんない"],
            "10分": ["十分", "十 分"],
            "お待ち": ["おまち"]
        },

        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ございます", "おります"],

        // ★ 謙譲表現：判定する
        humble: ["お待ち"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
待合室までご案内いたしますので、そちらでお待ちください。`
    },


    // 来客対応 R2
    R2: {
        must: ["田中", "外出", "10分", "戻る"],
        mustNot: ["社長"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ご案内": ["御案内", "御あんない","ごあんない"],
            "10分": ["十分", "十 分"],
            "お待ち": ["おまち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ございます", "おります"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。田中は現在外出しており、10分ほどで戻る予定です。`
    },


    // 来客対応 R3
    R3: {
        must: ["田中", "申し訳", "会議", "30分"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "申し訳": ["もうし訳"],
            "30分": ["三十分"],
            "さん": ["様", "先輩"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ありません。田中はただいま会議中で、30分ほどで終わる予定でございます。`
    },


    // 来客対応 4_1
    R4_1: {
        must: ["佐藤", "10時", "来社", "予定", "こちら", "お待ち"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "来社": ["来る"],
            "10時": ["十時", "十 時"],
            "こちら": ["当社", "弊社"],
            "お待ち": ["おまち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
佐藤は10時に来社する予定です。
恐れ入りますが、こちらでお待ちください。`
    },


    // 来客対応 4_2
    R4_2: {
        must: ["10時"],
        mustNot: ["違います"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "10時": ["十時", "十 時"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
恐れ入りますが、10時でございます。`
    },


    // 来客対応 R5
    R5: {
        must: ["鈴木", "申し訳", "出張", "終日", "不在"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "さん": ["様", "先輩"],
            "申し訳": ["もうし訳"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ございます", "おります"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。鈴木は本日出張のため終日不在でございます。`
    },


    // 来客対応 R6
    R6: {
        must: ["佐藤", "申し訳", "まもなく", "到着"],
        mustNot: ["課長", "さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "申し訳": ["もうし訳"],
            "30分": ["三十分"],
            "さん": ["様", "先輩"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません、佐藤はまだ戻っておりませんが、
まもなく到着する予定でございます。`
    },


    // 来客対応 R7
    R7: {
        must: ["ありがとう", "お預かり", "担当", "お渡し"],
        mustNot: ["もらい", "貰い"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ありがとう": ["有難う"],
            "お渡し": ["おわたし"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ありがとうございます。資料は私がお預かりし、担当の者にお渡しします。`
    },


    // 来客対応 R8
    R8: {
        must: ["廊下", "まっすぐ", "右手"],
        mustNot: ["もらい", "貰い"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "まっすぐ": ["真っ直ぐ"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
かしこまりました。廊下をまっすぐお進みいただき、右手にございます。`
    },


    // 来客対応 R9
    R9: {
        must: ["担当", "只今", "お渡し", "5分"],
        mustNot: ["人"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "只今": ["ただ今","ただいま"],
            "5分": ["五分"],
            "お渡し": ["お待ち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ただいま担当の者が準備しておりますので、5分ほどでお渡しできるかと存じます。`
    },


    // 来客対応 R10
    R10: {
        must: ["かしこまりました", "今後", "よろしくお願い"],
        mustNot: ["了解","わかりました"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "かしこまりました": ["承知"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
かしこまりました。こちらが私の名刺でございます。
今後ともどうぞよろしくお願いいたします。`
    },


    // 電話対応 P1
    P1: {
        must: ["佐藤", "申し訳", "席", "外し"],
        mustNot: ["先輩"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "先輩": ["様", "さん"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。ただいま佐藤は席を外しております。`
    },


    // 電話対応 P2
    P2: {
        must: ["山口", "申し訳", "会議"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "申し訳": ["もうし訳"],
            "さん": ["様", "先輩"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。ただいま山口は会議に出ております。`
    },


    // 電話対応 P3
    P3: {
        must: ["採用", "担当", "おつなぎ", "お待ち"],
        mustNot: ["つなぎます"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "おつなぎ": ["お繋ぎ"],
            "お待ち": ["おまち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おります"],
        // クッション言葉：判定する
        cushion: ["少々", "今しばらく", "少し"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
採用の件でございますね。担当の部署におつなぎいたしますので、
少々お待ちください。`
    },


    // 電話対応 4_1
    P4_1: {
        must: ["佐藤", "10時", "来社", "予定", "改めて","お電話", "お待ち"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "来社": ["来る","出社"],
            "10時": ["十時", "十 時"],
            "改めて": ["あらためて", "折り返し"],
            "お電話": ["ご連絡"],
            "お待ち": ["おまち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","今しばらく","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
佐藤は10時に来社する予定です。10時に改めてお電話いたしますので、
恐れ入りますが、今しばらくお待ちください。`
    },


    // 電話対応 4_2
    P4_2: {
        must: ["10時"],
        mustNot: ["違います"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "10時": ["十時", "十 時"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
恐れ入りますが、10時でございます。`
    },


    // 電話対応 P5
    P5: {
        must: ["担当", "申し訳", "席を外して", "伝言","お預かり"],
        mustNot: ["いない","いません"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "申し訳": ["もうし訳"],
            "席を外して": ["不在"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり","いただ"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。ただいま担当者が席を外しております。
よろしければ、伝言をお預かりいたします。`
    },


    // 電話対応 6
    P6: {
        must: ["システム", "別の番号", "対応"],
        mustNot: ["別です"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "対応": ["承"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","今しばらく","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
恐れ入りますが、システム担当は別の番号にて承っております。`
    },


    // 電話対応 7
    P7: {
        must: ["田中", "ただいま", "対応"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "さん": ["様", "先輩"],
            "ただいま": ["只今", "ただ今","只いま"],
            "対応": ["電話"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","今しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。田中はただいま別件の対応をしております。`
    },


    // 電話対応 8
    P8: {
        must: ["担当", "確認","改めて","お待ち"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "改めて": ["あらためて", "折り返し"],
            "お待ち": ["おまち"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","今しばらく","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
担当者に確認のうえ、こちらから折り返しご連絡を差し上げます。
今しばらくお待ちください。`
    },


    // 電話対応 9
    P9: {
        must: ["担当","おつなぎ"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "おつなぎ": ["お繋ぎ"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ありがとうございます。商品については担当部署がございますので、
そちらにおつなぎいたします。`
    },


    // 電話対応 10
    P10: {
        must: ["担当", "確認","改めて","ご連絡"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "改めて": ["あらためて", "折り返し"],
            "ご連絡": ["お電話"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],
        // クッション言葉：判定する
        cushion: ["恐れ入", "申し訳", "お手数", "お忙しい","今しばらく","いま、しばらく"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
申し訳ございません。内容を確認いたしますので、
担当者より改めてご連絡を差し上げてもよろしいでしょうか。`
    },


    // 先方訪問 1
    T1: {
        must: ["ビジネス", "申します","よろしく"],
        mustNot: ["さん"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "申します": ["もうします"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ビジネス株式会社の○○と申します。
どうぞよろしくお願いいたします。`
    },


    // 先方訪問 2
    T2: {
        must: ["拝受", "準備","ありがとう"],
        mustNot: ["あります"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ありがとう": ["有難う"],
            "拝受": ["はいじゅ"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
はい、確かに拝受しております。ご準備いただきありがとうございます。`
    },


    // 先方訪問 3
    T3: {
        must: ["確認", "ございます"],
        mustNot: ["あります"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ありがとう": ["有難う"],
            "拝受": ["はいじゅ"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
はい、いくつか確認させていただきたい点がございます。`
    },


    // 先方訪問 4
    T4: {
        must: ["お気遣い", "ありがとう","いただ"],
        mustNot: ["欲しい"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ありがとう": ["有難う"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
お気遣いいただきありがとうございます。
では、いただけますと幸いです。`
    },


    // 先方訪問 5
    T5: {
        must: ["かしこまりました", "順","説明"],
        mustNot: ["わかりました"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "かしこまりました": ["承知"],
            "わかりました": ["了解"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
かしこまりました。それでは、順を追ってご説明させていただきます。`
    },


    // 先方訪問 6
    T6: {
        must: ["拝見"],
        mustNot: ["見ました"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "拝見": ["はいけん"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "まし", "ござい", "おり","ました"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
はい、拝見いたしました。`
    },



    // 先方訪問 7
    T7: {
        must: ["前向き", "検討","させていただき"],
        mustNot: ["わかりました"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "検討": ["けんとう"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ありがとうございます。前向きに検討させていただきたいと思います。`
    },


    // 先方訪問 8
    T8: {
        must: ["ありがとう", "最後に","確認","させていただき"],
        mustNot: ["申し訳"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "ありがとう": ["有難う"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
ありがとうございます。最後に一点だけ確認させていただきたいです。`
    },


    // 先方訪問 9
    T9: {
        must: ["本日は", "お時間", "ありがとう","失礼いたし"],
        mustNot: ["申し訳"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "お時間": ["御時間", "機会"],
            "ありがとう": ["有難う"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり","まし"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
本日は貴重なお時間をいただき、誠にありがとうございました。失礼いたします。`
    },


    // 先方訪問 10
    T10: {
        must: ["失礼", "佐藤様", "お約束","ビジネス","お取次"],
        mustNot: ["さん","申し訳"],

         // ★ 問題ごとの表記ゆれ
        normalize: {
            "お取次": ["お取り次ぎ", "お取次ぎ"]
        },
        // ★ 丁寧な表現：判定する
        polite: ["です", "ます", "ござい", "おり","まし"],

        successMessage: "正解です！",
        example:
`【正しい解答例】
失礼いたします。佐藤様にお約束をいただいております、
ビジネス株式会社の○○と申します。お取次ぎいただけますでしょうか。`
    }


    // ★ 他の問題も同じ考え方で追加
};
